// Compiled using:
// gcc -O0 -g Code-Injection.c -o Code-Injection
//

// Run using:
// ./Code-Injection

#include <stdlib.h>

int main(int argc, char** argv) {
  if (argc != 2) {
    puts("Please pass your name as an argument (e.g. $ ./Code-Injection John)");
    exit(EXIT_FAILURE);
  }
  system("printf 'Hello '");
  char* base_command = "echo %s";
  char* name_of_user = argv[1];
  char* command;
  asprintf(&command, base_command, name_of_user);
  system(command);

  free(command);

  return 0;
}
