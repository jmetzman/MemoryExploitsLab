#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <stdint.h>
#include <assert.h>

char tmp_buffer[1000];

char* _cmd = "echo Hello";

char* get_cmd() {
  return _cmd;
}

int main(int argc, char **argv) {
  if(argc != 2) {
    exit(1);
  }

  int n = get_input(argv[1], tmp_buffer);
  char stack_buffer[256];
  memcpy(stack_buffer, tmp_buffer, n);
  char* cmd;
  cmd = get_cmd();
  system(cmd);

  return 0;
}

int get_input(char* filename, char* input_buf) {
  FILE *f = fopen(filename, "rb");
  fseek(f, 0, SEEK_END);
  long fsize = ftell(f);
  if (fsize >= 350)
    fsize = 350;

  fseek(f, 0, SEEK_SET);  //same as rewind(f);

  fread(input_buf, fsize, 1, f);
  fclose(f);
  input_buf[fsize] = 0;
  return fsize;
}
