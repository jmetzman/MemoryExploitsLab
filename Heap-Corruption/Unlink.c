#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>
#include <assert.h>

enum {
  FIELD_SZ = 8,
  NONFREE_MALLOC_CHUNK_SZ = 2 * FIELD_SZ,
  DATA_SZ = NONFREE_MALLOC_CHUNK_SZ * 8,
  USER_CHARS_SZ = 200,
};

uint64_t* pointer_arr[4];
char user_input[USER_CHARS_SZ];

int get_input(char* input_buf) {
  int idx, c;
  idx = 0;
  while ((c = getchar()) != EOF) {
    input_buf[idx] = c;
    idx++;
  }
  return idx;
}

int main(int argc, char** argv) {

  uint64_t* data_ptr = (uint64_t*) malloc(DATA_SZ);
  pointer_arr[0] = data_ptr; // user data gets written here
  assert(data_ptr);

  data_ptr = (uint64_t*) malloc(DATA_SZ);
  assert(data_ptr);
  pointer_arr[1] = data_ptr;  // program data goes here

  int i;
  for (i = 0; i < 2; i++) {
    int sz = get_input(user_input);
    int j;
    for (j = 0; j < sz; j++) {
      ((char**) pointer_arr)[0][j] = user_input[j];
    }
    if (i == 0) {
      free(pointer_arr[1]);
    }
  }

  return 0;
}
